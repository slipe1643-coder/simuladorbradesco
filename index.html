<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Simulador de Financiamento - Mobile</title>
  <style>
    html, body { height: 100%; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #fff;
      margin: 0;
      padding: 16px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      -webkit-text-size-adjust: 100%;
    }
    .container {
      width: 100%;
      max-width: 430px;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
    .logo { text-align: center; margin-bottom: 16px; }
    .logo img { height: 40px; }
    h2 { font-size: 20px; text-align: center; margin: 0 0 16px; }
    label { font-weight: 600; display: block; margin-top: 10px; }
    input, select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-top: 6px;
      font-size: 16px; /* evita zoom no iOS */
      -webkit-appearance: none;
    }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 18px;
      background: #d6001c;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover { background: #b00016; }
    .resultado {
      margin-top: 16px;
      padding: 14px;
      border: 1px solid #eee;
      border-radius: 12px;
      background: #fafafa;
      line-height: 1.5;
    }
    .aprovado { color: #108a00; font-weight: 700; display: inline-flex; align-items: center; }
    .aprovado::before { content: "✔ "; margin-right: 6px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <!-- Placeholder quadrado para o logo: substitua por uma URL/arquivo sua -->
      <div style="width:120px;height:40px;background:#eee;border-radius:6px;margin:0 auto;"></div>
    </div>

    <h2>Simulador de Financiamento</h2>

    <label for="tipoCliente">Tipo de Cliente</label>
    <select id="tipoCliente" onchange="toggleCampos()">
      <option value="pf">Pessoa Física (CPF)</option>
      <option value="pj">Pessoa Jurídica (CNPJ)</option>
    </select>

    <div id="dadosPF">
      <label>Nome do Cliente</label>
      <input type="text" id="nomeCliente" placeholder="Digite o nome">
      <label>CPF</label>
      <input type="text" id="cpfCliente" placeholder="Digite o CPF">
    </div>

    <div id="dadosPJ" style="display:none;">
      <label>Razão Social</label>
      <input type="text" id="razaoSocial" placeholder="Digite a razão social">
      <label>CNPJ</label>
      <input type="text" id="cnpjCliente" placeholder="Digite o CNPJ">
      <label>CPF</label>
      <input type="text" id="cpfPJ" placeholder="Digite o CPF do representante">
    </div>

    <label>Valor da Entrada (R$)</label>
    <input type="text" inputmode="decimal" id="entrada" placeholder="Ex: 10.000,00">

    <label>Valor Total do Veículo (R$)</label>
    <input type="text" inputmode="decimal" id="valorVeiculo" placeholder="Ex: 50.000,00">

    <label>Quantidade de Parcelas</label>
    <input type="number" id="parcelas" placeholder="Ex: 12" min="1" step="1">

    <button onclick="simular()">Simular</button>

    <div id="resultado" class="resultado" style="display:none;"></div>
  </div>

  <script>
    function toggleCampos() {
      const tipo = document.getElementById("tipoCliente").value;
      document.getElementById("dadosPF").style.display = (tipo === "pf") ? "block" : "none";
      document.getElementById("dadosPJ").style.display = (tipo === "pj") ? "block" : "none";
    }

    function parseMoedaBR(valor) {
      if (!valor) return NaN;
      // remove tudo que não for dígito, ponto ou vírgula
      valor = (valor + "").replace(/[^\d.,-]/g, "");
      // normaliza vírgula para ponto (suporta "50.000,25" e "50000,25" e "50000.25")
      const hasComma = valor.indexOf(",") > -1;
      if (hasComma) {
        valor = valor.replace(/\./g, "").replace(",", ".");
      }
      return parseFloat(valor);
    }

    function simular() {
      const tipo = document.getElementById("tipoCliente").value;
      let nome = "", cpf = "", cnpj = "";

      if (tipo === "pf") {
        nome = document.getElementById("nomeCliente").value.trim();
        cpf = document.getElementById("cpfCliente").value.trim();
      } else {
        nome = document.getElementById("razaoSocial").value.trim();
        cnpj = document.getElementById("cnpjCliente").value.trim();
        cpf = document.getElementById("cpfPJ").value.trim();
      }

      const entrada = parseMoedaBR(document.getElementById("entrada").value);
      const valorVeiculo = parseMoedaBR(document.getElementById("valorVeiculo").value);
      const parcelas = parseInt(document.getElementById("parcelas").value);

      if (isNaN(entrada) || isNaN(valorVeiculo) || isNaN(parcelas) || parcelas <= 0) {
        alert("Preencha todos os campos corretamente!");
        return;
      }

      const taxa = 0.018; // 1,80% ao mês (fixa)
      const valorFinanciado = valorVeiculo - entrada;
      const parcela = (valorFinanciado * taxa) / (1 - Math.pow(1 + taxa, -parcelas));

      let html = `
        <p><strong>${tipo === "pf" ? "Nome" : "Razão Social"}:</strong> ${nome || "-"}</p>
        ${cnpj ? `<p><strong>CNPJ:</strong> ${cnpj}</p>` : ""}
        <p><strong>CPF:</strong> ${cpf || "-"}</p>
        <p><strong>Valor da Entrada:</strong> R$ ${entrada.toLocaleString("pt-BR",{minimumFractionDigits:2})}</p>
        <p><strong>Valor Total do Veículo:</strong> R$ ${valorVeiculo.toLocaleString("pt-BR",{minimumFractionDigits:2})}</p>
        <p><strong>Taxa de Juros:</strong> 1,80% ao mês</p>
        <p><strong>Resultado da Simulação:</strong> <span class="aprovado">Aprovado</span></p>
        <p><strong>Financiado:</strong> R$ ${valorFinanciado.toLocaleString("pt-BR",{minimumFractionDigits:2})}</p>
        <p><strong>Prazo:</strong> ${parcelas} meses</p>
        <p><strong>Parcela:</strong> R$ ${parcela.toLocaleString("pt-BR",{minimumFractionDigits:2})}</p>
      `;

      const out = document.getElementById("resultado");
      out.innerHTML = html;
      out.style.display = "block";
      out.scrollIntoView({behavior: "smooth"});
    }
  </script>
</body>
</html>
